(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),o=t(2),s=t(4),u=t.n(s),i="https://nameless-sands-07409.herokuapp.com/api/persons",d={getAll:function(){return u.a.get(i).then((function(e){return e.data}))},addPerson:function(e){return u.a.post(i,e).then((function(e){return e.data}))},removePerson:function(e){return u.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},updatePerson:function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))}},j=t(0),l=function(e){var n=e.people;""!==e.search&&(n=e.people.filter((function(n){return n.name.toLowerCase().includes(e.search.toLowerCase())})));var t=n.map((function(n,t){return Object(j.jsxs)("div",{className:"personsList",children:[Object(j.jsxs)("span",{children:[n.name," ",n.phone," "]}),Object(j.jsx)("button",{onClick:function(){return e.remove(n.id,n.name)},children:"delete"},n.id)]},t)}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Numbers"}),t]})},b=function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{htmlFor:"filter-field",children:"Search for: "}),Object(j.jsx)("input",{type:"text",name:"filter-field",onChange:e.handleSearch})]})},h=function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Add or Update Entries"}),Object(j.jsxs)("form",{onSubmit:e.addPerson,children:[Object(j.jsxs)("div",{children:["Name: ",Object(j.jsx)("input",{required:!0,value:e.newName,onChange:e.handleNewPerson}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"Number: ",Object(j.jsx)("input",{required:!0,value:e.newNumber,onChange:e.handleNewNumber})]}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})]})},f=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"notif",children:n})},m=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),s=Object(a.a)(r,2),u=s[0],i=s[1],m=Object(o.useState)(""),p=Object(a.a)(m,2),O=p[0],x=p[1],v=Object(o.useState)(""),w=Object(a.a)(v,2),N=w[0],g=w[1],P=Object(o.useState)(),S=Object(a.a)(P,2),k=S[0],C=S[1];Object(o.useEffect)((function(){d.getAll().then((function(e){return c(e)}))}),[]);var A=function(e){C(e),setTimeout((function(){C(null)}),3e3)};return Object(j.jsxs)("div",{className:"main-container",children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(f,{message:k}),Object(j.jsx)(b,{handleSearch:function(e){g(e.target.value)}}),Object(j.jsx)(h,{addPerson:function(e){e.preventDefault();var n={name:u,phone:O},r=!1;t.forEach((function(e){e.name===u&&(window.confirm("Update ".concat(e.name," ?"))&&d.updatePerson(e.id,n).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n}))),A("Updated ".concat(e.name))})).catch((function(e){A(e.response.data.error)})),r=!0)})),r||d.addPerson(n).then((function(e){c(t.concat(e)),i(""),x(""),A("Added ".concat(e.name))})).catch((function(e){A(e.response.data.error)}))},newName:u,newNumber:O,handleNewPerson:function(e){i(e.target.value)},handleNewNumber:function(e){x(e.target.value)}}),Object(j.jsx)(l,{people:t,search:N,remove:function(e,n){window.confirm("Delete ".concat(n," ?"))&&d.removePerson(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),A("Deleted ".concat(n))}))}})]})};t(38);r.a.render(Object(j.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d093d870.chunk.js.map